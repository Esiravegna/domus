from influxdb import InfluxDBClient
import urllib2
import json
from time import time
import copy
current = urllib2.urlopen('http://api.wunderground.com/api/9fe997a4e78bd9cc/conditions/q/zmw:00000.1.87344.json')
json_string = current.read()
parsed_json = json.loads(json_string)
datapoints  =  []
datapoint_template = {'measurement':'label','tags':{'board':'wunderground'},'fields':{'value':0.0}}

temp  = copy.copy(datapoint_template)
temp['mesurement'] = 'temperature'
temp['fields']['value'] = float(parsed_json['current_observation']['temp_c'])
pressure = copy.copy(datapoint_template)
pressure['mesurement'] = 'pressure'
pressure['fields']['value'] = float(parsed_json['current_observation']['pressure_mb'])
humidity  = copy.copy(datapoint_template)
humidity['measurement'] = 'humidity'
humidity['fields']['value'] = float(parsed_json['current_observation']['relative_humidity'])
feelkslike = copy.copy(datapoint_template)
feelslike['measurement'] = 'feelslike'
feelslike['fields']['value'] = float(parsed_json['current_observation']['feelslike_c'])
#uv =  parsed_json['current_observation']['uv']
#wind_dir =  parsed_json['current_observation']['wind_degrees']
#wind_speed =  parsed_json['current_observation']['wind_kph']

current.close()

forecast =  urllib2.urlopen('http://api.wunderground.com/api/9fe997a4e78bd9cc/forecast/q/zmw:00000.1.87344.json')
parsed_forecast = json.loads(forecast.read())
for a_forecast in parsed_forecast['forecast']['simpleforecast']['forecastday']:
    
	

forecast.close()
